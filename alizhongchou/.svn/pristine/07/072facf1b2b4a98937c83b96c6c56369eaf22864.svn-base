function close_popup(t){for(var e=0;e<popups.length;e++)if(t==popups[e])return Array.remove(popups,e),document.getElementById("lh-thread-popup-"+t).style.display="none",void calculate_popups()}function display_popups(){var t=200,e=0;for(e;total_popups>e;e++)if(void 0!=popups[e]){var o=document.getElementById("lh-thread-popup-"+popups[e]);if(null===o)continue;o.style.right=t+"px",t+=300,o.style.display="block"}for(var i=e;i<popups.length;i++){var o=document.getElementById("lh-thread-popup-"+popups[i]);o.style.display="none"}}function register_popup(t,e){for(var o=0;o<popups.length;o++)if(t==popups[o])return Array.remove(popups,o),popups.unshift(t),void calculate_popups();var i=$("#lh-smile-list").length,n=$("#lh-bbcode-list").length;if(i&&$(".lh-smiley-plugin").each(function(){$(this).popover("hide")}),n&&$(".lh-bbcode-plugin").each(function(){$(this).popover("hide")}),!$("#lh-thread-popup-"+t).length){var s="";s+='<div id="lh-thread-popup-'+t+'" data-thread-id="'+t+'" class="popup-box">',s+='    <div class="popup-head">',s+='    <div class="popup-head-left">'+e+'<span class="badge"></span></div>',s+='    <div class="popup-head-right">',s+='    <div class="popup-head-btn">',s+='    <a class="lh-thread-get-info"><i class="icon-info"></i></a>',s+="    </div>",s+='    <div class="dropdown popup-head-btn">',s+='    <a class="dropdown-toggle" data-toggle="dropdown"><i class="icon-cog"></i></a>',s+='    <ul class="lh-actions-list dropdown-menu pull-right keep-on-click-dropdown">',s+=$("#lh-thread-action").html(),s+="    <ul>",s+="    </div>",s+='    <div class="popup-head-btn">',s+="    <a href=\"javascript:close_popup('"+t+'\');"><i class="icon-close"></i></a>',s+="    </div>",s+="    </div>",s+='    <div class="clearfix"></div>',s+="    </div>",s+='    <div class="popup-messages"></div>',s+='    <div class="popup-input">',s+='    <div class="lh-textarea-plugin">',n&&(s+='    <button type="button" class="btn btn-link lh-bbcode-plugin"><i class="icon-bold"></i></button>'),i&&(s+='    <button type="button" class="btn btn-link lh-smiley-plugin"><i class="icon-happy"></i></button>'),s+="    </div>",s+='    <textarea class="form-control lh-textarea-input" name="'+t+'" ></textarea>',s+="    </div>",s+="</div>",$("#lh-popup").append(s);var r=document.getElementById("lh-thread-popup-"+t);r.addEventListener("mouseover",function(t){$(this).css("z-index",481)}),r.addEventListener("mouseout",function(t){$(this).css("z-index",480)}),i&&$("#lh-thread-popup-"+t+" .lh-smiley-plugin").popover({placement:"top",html:!0,content:$("#lh-smile-list").html()}),n&&$("#lh-thread-popup-"+t+" .lh-bbcode-plugin").popover({placement:"top",html:!0,content:$("#lh-bbcode-list").html()})}popups.unshift(t),calculate_popups()}function calculate_popups(){var t=window.innerWidth;540>t?total_popups=1:(t-=200,total_popups=parseInt(t/320)),display_popups()}Array.remove=function(t,e,o){var i=t.slice((o||e)+1||t.length);return t.length=0>e?t.length+e:e,t.push.apply(t,i)};var total_popups=0,popups=[];window.addEventListener("resize",calculate_popups),window.addEventListener("load",calculate_popups),+function(t){"use strict";function e(e){t(i).remove(),t(n).each(function(){var i=o(t(this)),n={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",n)),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",n))})}function o(e){var o=e.attr("data-target");o||(o=e.attr("href"),o=o&&/#[A-Za-z]/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,""));var i=o&&t(o);return i&&i.length?i:e.parent()}if("function"!=typeof t.fn.dropdown){var i=".dropdown-backdrop",n="[data-toggle=dropdown]",s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(i){var n=t(this);if(!n.is(".disabled, :disabled")){var s=o(n),r=s.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var p={relatedTarget:this};if(s.trigger(i=t.Event("show.bs.dropdown",p)),i.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown",p),n.focus()}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var s=o(i),r=s.hasClass("open");if(!r||r&&27==e.keyCode)return 27==e.which&&s.find(n).focus(),i.click();var p=" li:not(.divider):visible a",a=s.find("[role=menu]"+p+", [role=listbox]"+p);if(a.length){var l=a.index(a.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus()}}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var o=t(this),i=o.data("bs.dropdown");i||o.data("bs.dropdown",i=new s(this)),"string"==typeof e&&i[e].call(o)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,s.prototype.toggle).on("keydown.bs.dropdown.data-api",n+", [role=menu], [role=listbox]",s.prototype.keydown).on("click.bs.dropdown.data-api",".keep-on-click-dropdown",function(t){t.stopPropagation()})}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.tooltip"),s="object"==typeof e&&e,r=s&&s.selector;(n||"destroy"!=e)&&(r?(n||i.data("bs.tooltip",n={}),n[r]||(n[r]=new o(this,s))):n||i.data("bs.tooltip",n=new o(this,s)),"string"==typeof e&&n[e]())})}if("function"!=typeof t.fn.tooltip){var o=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};o.VERSION="3.3.1",o.TRANSITION_DURATION=150,o.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},o.prototype.init=function(e,o,i){this.enabled=!0,this.type=e,this.$element=t(o),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var n=this.options.trigger.split(" "),s=n.length;s--;){var r=n[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var p="hover"==r?"mouseenter":"focusin",a="hover"==r?"mouseleave":"focusout";this.$element.on(p+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},o.prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},o.prototype.getDelegateOptions=function(){var e={},o=this.getDefaults();return this._options&&t.each(this._options,function(t,i){o[t]!=i&&(e[t]=i)}),e},o.prototype.enter=function(e){var o=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return o&&o.$tip&&o.$tip.is(":visible")?void(o.hoverState="in"):(o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o)),clearTimeout(o.timeout),o.hoverState="in",o.options.delay&&o.options.delay.show?void(o.timeout=setTimeout(function(){"in"==o.hoverState&&o.show()},o.options.delay.show)):o.show())},o.prototype.leave=function(e){var o=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o)),clearTimeout(o.timeout),o.hoverState="out",o.options.delay&&o.options.delay.hide?void(o.timeout=setTimeout(function(){"out"==o.hoverState&&o.hide()},o.options.delay.hide)):o.hide()},o.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var p="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(p);l&&(p=p.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(p).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var d=this.getPosition(),h=s[0].offsetWidth,c=s[0].offsetHeight;if(l){var u=p,f=this.options.container?t(this.options.container):this.$element.parent(),v=this.getPosition(f);p="bottom"==p&&d.bottom+c>v.bottom?"top":"top"==p&&d.top-c<v.top?"bottom":"right"==p&&d.right+h>v.width?"left":"left"==p&&d.left-h<v.left?"right":p,s.removeClass(u).addClass(p)}var g=this.getCalculatedOffset(p,d,h,c);this.applyPlacement(g,p);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(o.TRANSITION_DURATION):m()}},o.prototype.applyPlacement=function(e,o){var i=this.tip(),n=i[0].offsetWidth,s=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),p=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(p)&&(p=0),e.top=e.top+r,e.left=e.left+p,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var a=i[0].offsetWidth,l=i[0].offsetHeight;"top"==o&&l!=s&&(e.top=e.top+s-l);var d=this.getViewportAdjustedDelta(o,e,a,l);d.left?e.left+=d.left:e.top+=d.top;var h=/top|bottom/.test(o),c=h?2*d.left-n+a:2*d.top-s+l,u=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(c,i[0][u],h)},o.prototype.replaceArrow=function(t,e,o){this.arrow().css(o?"left":"top",50*(1-t/e)+"%").css(o?"top":"left","")},o.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},o.prototype.hide=function(e){function i(){"in"!=n.hoverState&&s.detach(),n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i(),this.hoverState=null,this)},o.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},o.prototype.hasContent=function(){return this.getTitle()},o.prototype.getPosition=function(e){e=e||this.$element;var o=e[0],i="BODY"==o.tagName,n=o.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=i?{top:0,left:0}:e.offset(),r={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},p=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,r,p,s)},o.prototype.getCalculatedOffset=function(t,e,o,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-o/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-o/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-o}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},o.prototype.getViewportAdjustedDelta=function(t,e,o,i){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var p=e.top-s-r.scroll,a=e.top+s-r.scroll+i;p<r.top?n.top=r.top-p:a>r.top+r.height&&(n.top=r.top+r.height-a)}else{var l=e.left-s,d=e.left+s+o;l<r.left?n.left=r.left-l:d>r.width&&(n.left=r.left+r.width-d)}return n},o.prototype.getTitle=function(){var t,e=this.$element,o=this.options;return t=e.attr("data-original-title")||("function"==typeof o.title?o.title.call(e[0]):o.title)},o.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},o.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},o.prototype.enable=function(){this.enabled=!0},o.prototype.disable=function(){this.enabled=!1},o.prototype.toggleEnabled=function(){this.enabled=!this.enabled},o.prototype.toggle=function(e){var o=this;e&&(o=t(e.currentTarget).data("bs."+this.type),o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o))),o.tip().hasClass("in")?o.leave(o):o.enter(o)},o.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=o,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.popover"),s="object"==typeof e&&e;(n||!/destroy|hide/.test(e))&&(n||i.data("bs.popover",n=new o(this,s)),"string"==typeof e&&n[e]())})}if("function"!=typeof t.fn.popover){var o=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");o.VERSION="3.3.5",o.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),o.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),o.prototype.constructor=o,o.prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),o=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof o?"html":"append":"text"](o),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=o,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}}(jQuery),!function(t){var e=function(){var e,o=[],i=!1,n=function(t){clearTimeout(e),e=setTimeout(s,100)},s=function(){for(var t=0,e=o.length;e>t;t++)o[t].apply()};return{register:function(e){o.push(e),i===!1&&(t(window).bind("resize",n),i=!0)},unregister:function(t){for(var e=0,i=o.length;i>e;e++)if(o[e]==t){delete o[e];break}}}}(),o=function(o,i){this.element=t(o),this.options=i,this.dropdown=t('<li class="dropup pull-left lh-name-expander tabdrop"><a class="btn dropdown-toggle" data-toggle="dropdown"><span class="icon-caret-up"></span></a><ul class="dropdown-menu keep-on-click-dropdown"></ul></li>').prependTo(this.element),e.register(t.proxy(this.layout,this)),this.layout()};o.prototype={constructor:o,addNode:function(t){var e='<li id="lh-name-'+t.id+'" class="lh-name">';e+="<a href=\"javascript:register_popup('"+t.id+"', '"+t.name+'\');" data-thread-id="'+t.id+'" class="btn'+(t.nodeClass?" "+t.nodeClass.join(" "):"")+'">'+t.name+" <span></span></a>",e+="</li>",this.dropdown.after(e),this.layout()},removeNode:function(t){this.element.find("#lh-name-"+t.id).remove(),this.layout()},layout:function(){var e=[],o=(this.dropdown,this.options);this.dropdown.removeClass("lh-hide"),this.element.append(this.dropdown.find("li")).find(">li").not(".tabdrop").each(function(){this.offsetTop>o.offsetTop&&e.push(this)}),this.element.find(">li").not(".tabdrop").off("click"),e.length>0?(e=t(e),this.dropdown.find("ul").empty().append(e)):this.dropdown.addClass("lh-hide")}},t.fn.responsivebar=function(e,i){return this.each(function(){var n=t(this),s=n.data("responsivebar"),r="object"==typeof e&&e;s||n.data("responsivebar",s=new o(this,t.extend({},t.fn.responsivebar.defaults,r))),"string"==typeof e&&("undefined"==typeof i&&(i={}),s[e](i))})},t.fn.responsivebar.defaults={offsetTop:1},t.fn.responsivebar.Constructor=o}(window.jQuery);